{{ define "main" }}
<div class="container">
    <h1>These are my photos</h1>
    <main class="container border-2 border-red-700">
        <article>
            <header>
                <h1>{{.Title}}</h1>
            </header>
            <!-- "{{.Content}}" pulls from the markdown content of the corresponding _index.md -->
            {{.Content}}
        </article>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/css/lightbox.min.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>

        <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
        <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>

        <style>
            .carousel-cell {
                display: block;
                {{/*  height: 500px;  */}}
              }
        </style>

        <!-- Ranges through content/photos/*.md -->
        {{ range .Pages }}
        <div class="max-w-lg">
            <a href="{{.Permalink}}"><h2>{{.Title}}</h2></a>
            <h5>{{.Date.Format "2006-01-02"}}</h5>

            {{/*  {{ with .Resources.ByType "image" }}
            {{ range . }}
            <img src="{{ .RelPermalink }}" />
            {{ end }}
            {{ end }} */}}
            <div class="carousel" data-flickity='{ "imagesLoaded": true, "percentPosition": false}'>
                {{ $image := (.Page.Resources.ByType "image") }}
                {{ with $image }}
                {{ range . }}
                {{/*  {{ $resized := .Fill "150x115 q20" }}  */}}
                <img class="carousel-cell max-h-96 max-w-lg w-auto h-auto" src="{{ .RelPermalink }}" />
                {{ end }}
                {{ end }}
            </div>
            <div>
                <p>
                    This is the text describing the images above.
                </p>
            </div>
        </div>
        {{ end }}
    </main>
</div>
{{ end }}